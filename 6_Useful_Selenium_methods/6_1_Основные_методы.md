# Основные методы Selenium

## Как работать с элементами типа checkbox и radiobutton?

Checkbox (чекбокс или флажок) и radiobutton (радиобаттон или переключатель) — часто используемые в формах элементы.
Основная разница между ними состоит в том, что флажки позволяют выбирать/отключать любой из представленных вариантов, а
переключатели позволяют выбрать только один из вариантов. Далее мы будем называть эти элементы на англоязычный манер:
checkbox и radiobutton.

Так выглядят checkboxes:

<img src="img/check_box.png" width="400" height="200" alt="checkbox">

А это radiobuttons:

<img src="img/radiobutton.png" width="400" height="200" alt="radiobutton">

Оба этих элемента создаются при помощи тега `input` со значением атрибута `type` равным `checkbox` или `radio`
соответственно. В html-коде страницы вы увидите:

```html
<input type="checkbox">
<input type="radio">
```

Если checkbox или radiobutton выбран, то у элемента появится новый атрибут `checked` без значения. Часто
атрибут `checked` уже установлен для одного из элементов по умолчанию.

```html
<input type="checkbox" checked>
<input type="radio" checked>
```

Radiobuttons объединяются в группу, где все элементы имеют одинаковые значения атрибута `name`, но разные значения
атрибута `value`:

```html
<input type="radio" name="language" value="python" checked>
<input type="radio" name="language" value="selenium">
```

Checkboxes могут иметь как одинаковые, так и разные значения атрибута name. Поэтому и те, и другие лучше искать с
помощью значения `id` или значения атрибута `value`. Если вы видите на странице чекбокс с уникальным значением name, то
можете искать по name.

Чтобы снять/поставить галочку в элементе типа checkbox или выбрать опцию из группы radiobuttons, надо указать WebDriver
метод поиска элемента и выполнить для найденного элемента метод `click()`:

```python
option1 = browser.find_element(By.CSS_SELECTOR, "[value='python']")
option1.click()
```

Также вы можете увидеть тег `label` рядом с `input`. Этот тег используется, чтобы сделать кликабельным текст, который
отображается рядом с флажком. Этот текст заключен внутри тега `label`. Элемент `label` связывается с элементом `input` с
помощью атрибута `for`, в котором указывается значение атрибута `id` для элемента `input`:

```html

<div>
    <input type="radio" id="python" name="language" checked>
    <label for="python">Python</label>
</div>
<div>
    <input type="radio" id="java" name="language">
    <label for="java">Java</label>
</div>
```

В этом случае можно также отметить нужный пункт с помощью WebDriver, выполнив метод `click()` на элементе `label`.

```python
option1 = browser.find_element(By.CSS_SELECTOR, "[for='java']")
option1.click()
```

## Задание: кликаем по checkboxes и radiobuttons (капча для роботов)

На данной [странице](https://suninjuly.github.io/math.html) мы добавили капчу для роботов, то есть тест, являющийся
простым для компьютера, но сложным для человека.

Нужно написать программу, которая выполнит следующие шаги:

1. Открыть страницу https://suninjuly.github.io/math.html.
2. Считать значение для переменной x.
3. Посчитать математическую функцию от x (код для этого приведён ниже).
4. Ввести ответ в текстовое поле.
5. Отметить checkbox "I'm the robot".
6. Выбрать radiobutton "Robots rule!".
7. Нажать на кнопку Submit.

Для этой задачи вам понадобится использовать атрибут `.text` для найденного элемента.
Обратите внимание, что скобки здесь не нужны:

```python
x_element = browser.find_element(By.CSS_SELECTOR, selector_value)
x = x_element.text
y = calc(x)
```

Атрибут `text` возвращает текст, который находится между открывающим и закрывающим тегами элемента. Например, `text` для
данного элемента `<div class="message">У вас новое сообщение.</div>` вернёт строку: `"У вас новое сообщение"`.

Используйте функцию `calc()`, которая рассчитает и вернет вам значение функции, которое нужно ввести в текстовое поле.
Не забудьте добавить этот код в начало вашего скрипта:

```python
import math


def calc(x):
    return str(math.log(abs(12 * math.sin(int(x)))))
```

Если все сделано правильно и достаточно быстро (в этой задаче тоже есть ограничение по времени), вы увидите окно с
числом.

## Метод get_attribute

Мы уже знаем, как найти нужный элемент на странице и как получить видимый пользователю текст. Для более детальных
проверок в тесте нам может понадобиться узнать значение атрибута элемента. Атрибуты могут быть стандартными свойствами,
которые понимает и использует браузер для отображения и вёрстки элементов или для хранения служебной информации,
например, `name`, `width`, `height`, `color` и [многие другие](https://www.w3schools.com/tags/ref_attributes.asp).
Также атрибуты могут быть созданы разработчиками проекта для задания собственных стилей или правил.

Значение атрибута представляет собой строку. Если значение атрибута отсутствует, то это равносильно значению атрибута
равному "false". Давайте еще раз взглянем на страницу http://suninjuly.github.io/math.html. На ней есть radiobuttons,
для которых выбрано значение по умолчанию. В автотесте нам может понадобиться проверить, что для одного из radiobutton
по умолчанию уже выбрано значение. Для этого мы можем проверить значение атрибута checked у этого элемента. Вот HTML-код
элемента:

```html
<input class="check-input" type="radio" name="ruler" id="peopleRule" value="people" checked>
```

Найдём этот элемент с помощью WebDriver:

```python
people_radio = browser.find_element(By.ID, "peopleRule")
```

Найдём атрибут "checked" с помощью встроенного метода get_attribute и проверим его значение:

```python
people_checked = people_radio.get_attribute("checked")
print("value of people radio: ", people_checked)
assert people_checked is not None, "People radio is not selected by default"
```

Т.к. у данного атрибута значение не указано явно, то метод `get_attribute` вернёт "true". Возможно, вы заметили, что "
true" написано с маленькой буквы, — все методы WebDriver взаимодействуют с браузером с помощью JavaScript, в котором
булевые значения пишутся с маленькой буквы, а не с большой, как в Python.

Мы можем написать проверку другим способом, сравнив строки:

```python
assert people_checked == "true", "People radio is not selected by default"
```

Если атрибута нет, то метод get_attribute вернёт значение `None`. Применим метод `get_attribute` ко второму radiobutton,
и убедимся, что атрибут отсутствует.

```python
robots_radio = browser.find_element(By.ID, "robotsRule")
robots_checked = robots_radio.get_attribute("checked")
assert robots_checked is None
```

Так же мы можем проверять наличие атрибута `disabled`, который определяет, может ли пользователь взаимодействовать с
элементом. Например, в предыдущем задании на странице с капчей для роботов JavaScript устанавливает атрибут `disabled` у
кнопки **Submit**, когда истекает время, отведенное на решение задачи.

```html

<button type="submit" class="btn btn-default" disabled>Submit</button>
```

## Задание: поиск сокровища с помощью get_attribute

В данной задаче вам нужно с помощью роботов решить ту же математическую задачу, как и в прошлом задании. Но теперь
значение переменной х спрятано в "сундуке", точнее, значение хранится в атрибуте valuex у картинки с изображением
сундука.

Ваша программа должна:

1. Открыть страницу http://suninjuly.github.io/get_attribute.html.
2. Найти на ней элемент-картинку, который является изображением сундука с сокровищами.
3. Взять у этого элемента значение атрибута valuex, которое является значением x для задачи.
4. Посчитать математическую функцию от x (сама функция остаётся неизменной).
5. Ввести ответ в текстовое поле.
6. Отметить checkbox "I'm the robot".
7. Выбрать radiobutton "Robots rule!".
8. Нажать на кнопку "Submit".

Для вычисления значения выражения в п.4 используйте функцию `calc(x)` из предыдущей задачи.

Если все сделано правильно и достаточно быстро (в этой задаче тоже есть ограничение по времени), вы увидите окно с
числом.
